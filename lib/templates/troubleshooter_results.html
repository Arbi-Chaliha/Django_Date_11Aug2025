{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-7 text-center">
        <h1 class="my-3 animated-title">FNFM Troubleshooting Results</h1>
    </div>
</div>
<hr>

<div class="row">
    <div class="col-md-12">
        <a href="{% url 'troubleshooter_app:troubleshooter' %}" class="btn btn-secondary mb-4">Go Back to Form</a>
        
        {% for message in messages %}
            <div class="alert alert-info enlarged-text bold-blue" role="alert">
                {{ message }}
            </div>
        {% endfor %}

        {% if partition_id %}
            <h3 class="mt-4 enlarged-text bold-blue">The partition_id associated with your chosen criteria is {{ partition_id }}</h3>
            <hr>
        {% endif %}

        {% if root_cause_table_html %}
            <h3 class="mt-4 enlarged-text">Root Cause Analysis (<span class="red-dot">ðŸ”´</span> Only)</h3>
            <div class="table-responsive">
                {{ root_cause_table_html|safe }}
            </div>
        {% else %}
            <p class="mt-4 enlarged-text">No alerts detected for this failure or no data available for the selected criteria.</p>
        {% endif %}

        {% if graph_html_path %}
            <h3 class="mt-4 enlarged-text">Knowledge Graph Visualization</h3>
            <iframe src="{{ graph_html_path }}" width="100%" height="1150px" frameborder="0"></iframe>
        {% endif %}

        {% if df_clean_html %}
            <h3 class="mt-4 enlarged-text">All Processed Triples</h3>
            <div class="table-responsive">
                {{ df_clean_html|safe }}
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}